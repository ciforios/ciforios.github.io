---
layout:     post
title:      "Continuous Integration with Jenkins"
subtitle:   "Setting things up and running"
date:       2015-04-21 12:00:00
author:     "The Crew"
header-img: "img/post-bg-06.jpg"
tags: [continuous-integration]
---

Within this page we will describe how we set up Jenkins on our Mac to meet our requirements. 
![alt text]({{ site.url }}/img/jenkins/jenkinsLogo.png)


###Setup
Download the latest Jenkins war file from the offical [Jenkins homepage](http://jenkins-ci.org/). 
On our server machine we moved the war file into the applications folder and created there a separted Jenkins folder.
Create Jenkins folder in Application und move war file there
> Note: *Jenkins requires Java7 or later*.<br>
Download from https://www.java.com/de/download/mac_download.jsp
	
	1. Install Java from pkg. Oracle's installer puts java inside the /Library/Internet Plug-Ins/JavaAppletPlugin.plugin. And it doesn't overwrite /usr/bin/java
	2. Check java version in terminal -> java -version 
	3. It won't be set to latest java version. Do following:
	  * ```sudo rm /usr/bin/java``` -> Remove old symbol link (points to /System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java, which is Apple's 1.6 version)
	  * ```sudo ln -s /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java /usr/bin``` -> Replace /usr/bin/java symlink

Start Jenkins via: ```java -jar /Applications/Jenkins/jenkins.war &```
  * Open Jenkins via Webfrontend: [http://localhost:8080/](http://localhost:8080/)

#### Creating Users



###Security settings

By default no authentication is required<br>
You should activate the security settings though, because Jenkins is usually reachable over the network and without this security feature it is easily accessable.<br>

In our case the following changes have been made:<br>
Manage Jenkins->Global Security->Enable Security: <br>
Security Realm has been activated. Jenkins own user database (with allow users to signup)<br>
Authorization: Logged-in users can do anything<br>
>Remark: If you don't add security realm it will cause an error "/j_acegi_security_check"

Save changes



###Plugins
There is a multitude of plugins for Jenkins. For our CI approach we mainly used the folloing 4 plugins.

Slack plugin: [https://wiki.jenkins-ci.org/display/JENKINS/Slack+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Slack+Plugin)

***

GIT Plugin: [https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)

***
Gerrit Trigger: [https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)


***
XCode Integration: [https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin)


You can install plugins under "Manage Jenkins" -> Manage Plugins. <br>
In this overview table select the tab "Available". <br>
Select the plugins you want to install and click on the button "Download now and install after restart"

####Configuring Gerrit Trigger
Configure Plugin in Manage Jenkins->Gerrit Trigger<br>
Add new server
Frontend URL: http://192.168.8.10:8081/
SSH Port: 29418
Username: jenkins (Need to be added to Gerrit as a new user with admin rights)
       Using old hdm account from yannik with badgme1
SSH Keyfile and password. Generated ssh file for Jenkins

###Jobs
For creating a new job, select new item on the left side. 

####Build and test job


####Build and upload to master branch job