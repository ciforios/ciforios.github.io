---
layout:     post
title:      "Automated testing with Xcode and Jenkins"
subtitle:   "Setting up a the Xcode-Project and a Jenkins job"
date:       2015-04-24 11:20:00
author:     "The Crew"
header-img: "img/post-bg-04.jpg"
tags: [jenkins]
---

##Preparing your system
Before you can start to setup a Jenkins job for automated testing you need to make sure that you've installed all dependencies.

### 1. install ocunit2junit
Jenkins is able to show JUnit test-reports in the Jenkins webinterface. To use this functionality with an Xcode-project you need to convert the test-reports of the *xcodebuild* in a JUnit-XML format. Therefor we used a script called *OCUnit2JUnit*.

	gem install ocunit2junit

### 2. TODO: Symbolic link?



##Editing the Jenkins job


###Build step - xcodebuild
To trigger automated tests after a successful build, you need to add another build step in your previously created job. 

1. click on *Add build step*
2. select *Execute shell*
3. paste the following shell command in the *Command field*

{% highlight bash %}	
xcodebuild -project badgeme.xcodeproj -sdk iphonesimulator -scheme badgeme clean test 2>&1 | ocunit2junit
{% endhighlight %}

###Post build action - Publish JUnit test report result
Finally you need to setup a post build action to make the test-report results visible.

The output of the *ocunit2junit* script is by default in a *test-reports* folder in the root directory of the build.

Add the following path to the *Test reports XMLs* field.

	**/test-reports/*.xml
	
##The final job
The bottom part of your Jenkins job should finally look like this:

![image](/img/jenkins-job-testing.png)


	
##Result

As a result you should see a graph showing your test history of the project. It shows successfull (blue), failed (red) and skipped (yellow) tests.

![image](/img/test-result-trend.png)
Source: [https://issues.jenkins-ci.org/secure/attachment/19099/hudson_test_result_trend.png](https://issues.jenkins-ci.org/secure/attachment/19099/hudson_test_result_trend.png)

Additionally you get a detailed test-report within each build.

![image](/img/test-result-detail.png)

	
